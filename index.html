<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>It's for you</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <main>
        <div class="wrap">
            <div class="title">
                <p >Чтобы расшифровать текст, введи имя своего питомца и свою дату рождения, затем нажми кнопку</p>
            </div>
            <div class="key">
                <input id="keyForDecryption" type="text" placeholder="ИмяДата">
            </div>
            <div class="btn">  
                <button id="button" >бей сюда</button></div>
            <div class="monolog" id="message">
             
                <p>
                    Видимо, это будет небольшой монолог мыслей, ведь я даже не знаю, проявишь ли ты любопытство и прочитаешь это сообщение.
                    Но в любом случае это моя последняя попытка осторожно возобновить наше общение, не нарушая обещания — если это возможно. <br/>
                    Чёрт, как же мне не хватает твоих рассказов о работе и твоего "ля".).
                </p>
                <p>
                    И всё же, если ты читаешь это, хочу, чтобы ты обратила внимание: с последнего сообщения, отправленного тебе, 
                    я себя очень хорошо веду и за все время ни разу тебя не побеспокоил). <br/>
                    Видишь, какой я молодец. 
                </p>
                <p>  
                    Помнишь, ты скидывала мне свои зарисовки, так вот я погуглил, и у меня теперь пополнился список аниме, которые я хочу посмотреть.
                    Недавно досмотрел Hunter x Hunter, и мне понравилось, особенно эпизод с Меруемом и Камуги, где они играли последнюю партию, а сейчас смотрю Токийские мстители.<br/>  
                    Думаю, я буду время от времени дополнять сообщение до конца этого года, если будет желание.
                    Возможно, дизайн изменю или анимации добавлю, а потом, наверное, всё удалю. 
                    Или сделаю эту страничку хранилищем для своего плейлиста.
                    Вдруг у нас одинаковые предпочтения в музыке.<br/>          
                    У тебя две новые красотки, а как же беляшик с пивом на Новый год? Смерть в нищете тебя совсем не пугает?)<br/> 
                    Интересно какой шанс, что ты прочитаешь этот текст и мы снова будем общаться? Кажется, он близок к нулю.)                              
                </p>
                <p>
                    Думаю, хватит себя изводить)
                    Если дверь закрыта, это не значит, что её нужно выбивать с ноги. Любопытно, сколько раз я уже повторяю это себе)<br/>
                    Начинаю злиться на себя, потому что хочу проявить к тебе внимание и заботу, но понимаю, что тебе это не нужно, и всё равно продолжаю о тебе думать.<br/>
                    Хорошо хоть хватило ума не отправлять тебе это в личное сообщение — не хотелось бы обрести статус *многообещающего*.)<br/>
                    Что со мной не так, и зачем я это всё пишу?...мне нужна помощь. Может, в психбольничку сходить, мне там белую рубашку подарят, и кашка, думаю, там вкусная. 
                    Херню можно всякую творить, и никто не осудит — там все свои… м‑мм… да, надо будет обдумать.

                </p> 
                <p>                  
                    В любом случае близится Новый год, и я надеюсь всё плохое ты оставишь в этом году, а всё самое хорошее заберёшь в следующий.) <br/>
                    Уверен, если ты захочешь, там найдётся место и для меня.
                 </p>  
               
            </div>
        </div>
    </main>
    <audio id="ambient">
        <source src="assets/smallville_11. Lifehouse - Everything.mp3" type="audio/mpeg">
     
    </audio>

    <script src="js/main.js"></script>
    <canvas id="sky"></canvas>
<script>
    (() => {
      const canvas = document.getElementById('sky');
      const ctx = canvas.getContext('2d');
      let W, H, trails = [];
      const SHOOTING_RATE = 0.03;
      const DPR = Math.min(window.devicePixelRatio || 1, 2);

      function resize() {
        W = canvas.clientWidth = window.innerWidth;
        H = canvas.clientHeight = window.innerHeight;
        canvas.width = Math.floor(W * DPR);
        canvas.height = Math.floor(H * DPR);
        ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
      }

      function createShootingStar() {
        const startX = Math.random() * W;
        const startY = -20;
        const angle = (Math.PI / 180) * (20 + Math.random() * 20);
        const speed = 400 + Math.random() * 400;
        const vx = Math.cos(angle) * speed;
        const vy = Math.sin(angle) * speed;
        const life = 0.8 + Math.random() * 0.8;
        trails.push({ x: startX, y: startY, vx, vy, life, t: 0, alpha: 1, width: 2 + Math.random() * 2 });
      }

      let last = performance.now();
      function tick(now) {
        const dt = Math.min((now - last) / 1000, 0.033);
        last = now;
        if (Math.random() < SHOOTING_RATE) createShootingStar();
        ctx.clearRect(0, 0, W, H);

        for (let i = trails.length - 1; i >= 0; i--) {
          const st = trails[i];
          st.t += dt;
          st.x += st.vx * dt;
          st.y += st.vy * dt;
          st.alpha = Math.max(0, 1 - st.t / st.life);

          const tailX = st.x - (st.vx * 0.04);
          const tailY = st.y - (st.vy * 0.04);
          const g = ctx.createLinearGradient(st.x, st.y, tailX, tailY);
          g.addColorStop(0, `rgba(255,255,255,${0.9 * st.alpha})`);
          g.addColorStop(1, `rgba(255,255,255,0)`);

          ctx.strokeStyle = g;
          ctx.lineWidth = st.width;
          ctx.lineCap = 'round';
          ctx.beginPath();
          ctx.moveTo(st.x, st.y);
          ctx.lineTo(tailX, tailY);
          ctx.stroke();

          ctx.fillStyle = `rgba(255,255,255,${0.7 * st.alpha})`;
          ctx.beginPath();
          ctx.arc(st.x, st.y, 1.5 + st.width * 0.4, 0, Math.PI * 2);
          ctx.fill();

          if (st.y > H + 50 || st.x > W + 50 || st.alpha <= 0) {
            trails.splice(i, 1);
          }
        }
        requestAnimationFrame(tick);
      }

      window.addEventListener('resize', resize, { passive: true });
      resize();
      requestAnimationFrame(tick);

      // Настройка стиля canvas
      canvas.style.position = "fixed";
      canvas.style.inset = "0";
      canvas.style.zIndex = "0";
      canvas.style.pointerEvents = "none";
      canvas.style.background = "transparent";
    })();
</script>
</body>
</html>